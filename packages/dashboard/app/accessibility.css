/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  :root {
    --a11y-bg-primary: #000000;
    --a11y-bg-secondary: #1a1a1a;
    --a11y-text-primary: #ffffff;
    --a11y-text-secondary: #e0e0e0;
    --a11y-border: #ffffff;
    --a11y-focus: #ffff00;
  }
  
  body {
    background: var(--a11y-bg-primary) !important;
    color: var(--a11y-text-primary) !important;
  }
  
  /* Glass cards in high contrast */
  .high-contrast {
    background: var(--a11y-bg-secondary) !important;
    border: 2px solid var(--a11y-border) !important;
    color: var(--a11y-text-primary) !important;
  }
  
  /* Button states */
  button:focus,
  a:focus,
  [tabindex]:focus {
    outline: 3px solid var(--a11y-focus) !important;
    outline-offset: 2px !important;
  }
  
  /* Ensure all text meets contrast requirements */
  .text-gray-400,
  .text-gray-500,
  .text-gray-600 {
    color: var(--a11y-text-secondary) !important;
  }
  
  /* Icon visibility */
  [aria-hidden="true"] {
    opacity: 0.8;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus Indicators */
:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

.focus-indicator-enhanced:focus-visible {
  outline: 3px solid #3b82f6;
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.3);
}

.focus-indicator-high-contrast:focus-visible {
  outline: 4px solid #ffff00;
  outline-offset: 2px;
  box-shadow: 0 0 0 8px #000000;
}

/* Screen Reader Only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only:focus,
.sr-only:active {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: inherit;
  border: inherit;
}

/* Skip Links */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #3b82f6;
  color: white;
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
  font-size: 14px;
  font-weight: 500;
}

.skip-link:focus {
  top: 6px;
}

/* Ensure proper color contrast for metrics */
.metrics-value {
  color: #ffffff;
  font-weight: 700;
}

.metrics-label {
  color: #e5e7eb;
  font-weight: 500;
}

.metrics-subtitle {
  color: #9ca3af;
}

/* Progress bars with better contrast */
.progress-bar {
  background-color: #374151;
  border: 1px solid #6b7280;
}

.progress-fill {
  min-height: 8px; /* Ensure minimum target size */
}

/* Button minimum target size */
button,
[role="button"],
a,
input[type="checkbox"],
input[type="radio"] {
  min-height: 44px;
  min-width: 44px;
}

/* Exception for icon-only buttons that already have adequate padding */
button.icon-button,
[role="button"].icon-button {
  min-height: 32px;
  min-width: 32px;
  padding: 8px;
}

/* Ensure interactive elements are clearly distinguished */
button,
[role="button"],
a {
  cursor: pointer;
}

button:disabled,
[role="button"][aria-disabled="true"] {
  cursor: not-allowed;
  opacity: 0.6;
}

/* Live region styling */
[aria-live] {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* Color blind support filters */
.protanopia {
  filter: url(#protanopia);
}

.deuteranopia {
  filter: url(#deuteranopia);
}

.tritanopia {
  filter: url(#tritanopia);
}

.monochrome {
  filter: grayscale(100%);
}